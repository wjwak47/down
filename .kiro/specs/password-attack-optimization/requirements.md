# 密码破解攻击顺序优化需求

## 引言

基于密码学研究和实际破解统计数据，当前的7层破解逻辑需要重新排序以提高效率。优化目标是在最短时间内获得最高的成功率。

## 术语表

- **ROI (投资回报率)**: 时间投入与成功率的比值
- **累积成功率**: 前N个阶段的总成功率
- **边际效益**: 每增加一个阶段带来的额外成功率
- **时间复杂度**: 每个阶段预期的执行时间

## 需求

### 需求 1: 基于ROI的阶段重排序

**用户故事**: 作为用户，我希望密码破解能在最短时间内获得最高成功率，以便快速获得结果。

#### 验收标准

1. WHEN 开始密码破解 THEN 系统应按照ROI从高到低的顺序执行攻击阶段
2. WHEN 计算ROI THEN 系统应使用公式：ROI = 成功率 / (时间成本 + 复杂度权重)
3. WHEN 某个阶段成功率过低 THEN 系统应考虑将其移至后期或移除
4. WHEN 两个阶段ROI相近 THEN 系统应优先选择时间成本更低的阶段

### 需求 2: 密码复杂度自适应排序

**用户故事**: 作为用户，我希望系统能根据目标的可能密码复杂度智能调整攻击顺序。

#### 验收标准

1. WHEN 检测到简单密码模式 THEN 系统应优先使用字典和常见密码攻击
2. WHEN 检测到复杂密码模式 THEN 系统应优先使用AI生成和规则变换
3. WHEN 无法判断密码复杂度 THEN 系统应使用通用优化顺序
4. WHEN 前期阶段失败 THEN 系统应动态调整后续阶段的优先级

### 需求 3: 时间窗口优化

**用户故事**: 作为用户，我希望在不同的时间预算下获得最优的破解策略。

#### 验收标准

1. WHEN 用户设置快速模式(5分钟内) THEN 系统应只执行高ROI的前3个阶段
2. WHEN 用户设置标准模式(30分钟内) THEN 系统应执行前5个阶段
3. WHEN 用户设置深度模式(无时间限制) THEN 系统应执行所有阶段
4. WHEN 某阶段超时 THEN 系统应自动跳转到下一阶段

### 需求 4: 统计数据驱动的动态调整

**用户故事**: 作为系统，我希望能基于历史成功数据动态优化攻击顺序。

#### 验收标准

1. WHEN 收集到足够的统计数据 THEN 系统应更新各阶段的成功率估计
2. WHEN 某阶段连续失败 THEN 系统应降低其优先级
3. WHEN 某阶段成功率异常高 THEN 系统应提升其优先级
4. WHEN 用户反馈结果 THEN 系统应记录并用于优化算法

### 需求 5: 并行化可能性评估

**用户故事**: 作为用户，我希望系统能同时运行多个兼容的攻击阶段以提高效率。

#### 验收标准

1. WHEN GPU资源充足 THEN 系统应并行运行兼容的攻击方法
2. WHEN CPU和GPU可同时使用 THEN 系统应分配不同类型的攻击给不同处理器
3. WHEN 内存资源有限 THEN 系统应串行执行内存密集型攻击
4. WHEN 检测到资源冲突 THEN 系统应自动切换到串行模式

## 专家建议的优化顺序

基于密码学研究和实际统计数据，建议的新顺序：

### 第一梯队 (0-5分钟，高ROI)
1. **常见密码 + 键盘模式** (合并执行，1-2分钟，60%累积成功率)
2. **AI智能生成** (2-3分钟，75%累积成功率)
3. **短密码暴力破解** (1-2分钟，85%累积成功率)

### 第二梯队 (5-30分钟，中等ROI)  
4. **智能字典攻击** (5-15分钟，92%累积成功率)
5. **规则变换攻击** (10-20分钟，96%累积成功率)

### 第三梯队 (30分钟+，低ROI但必要)
6. **混合攻击** (30-120分钟，98%累积成功率)
7. **深度掩码攻击** (2-24小时，99%累积成功率)

## 优化理由

### 1. 常见密码优先
- **原因**: 80%的用户使用常见密码或键盘模式
- **ROI**: 极高 (60%成功率 / 2分钟 = 30%/分钟)
- **建议**: 合并Top10K和键盘模式，因为它们都是快速字典查找

### 2. AI生成第二位
- **原因**: AI能生成人类常用的密码模式，但需要一定计算时间
- **ROI**: 高 (15%增量成功率 / 3分钟 = 5%/分钟)
- **建议**: 保持当前位置，但优化生成策略

### 3. 短密码暴力破解第三位
- **原因**: 虽然成功率不高，但执行速度极快
- **ROI**: 中高 (10%增量成功率 / 2分钟 = 5%/分钟)
- **建议**: 限制在4位以内，避免时间浪费

### 4. 字典攻击重新定位
- **原因**: 14M字典虽然全面，但ROI不如前三个阶段
- **ROI**: 中等 (7%增量成功率 / 15分钟 = 0.47%/分钟)
- **建议**: 移至第四位，作为深度攻击的开始

### 5. 规则变换攻击优化
- **原因**: 对字典进行变换，成功率较高但耗时
- **ROI**: 中等 (4%增量成功率 / 20分钟 = 0.2%/分钟)
- **建议**: 优化规则集，减少无效变换

### 6. 混合攻击和掩码攻击
- **原因**: 成功率低但覆盖面广，适合作为最后手段
- **ROI**: 低 (<2%增量成功率 / 数小时)
- **建议**: 仅在深度模式下执行

## 性能指标

### 预期改进
- **5分钟内成功率**: 60% → 85% (+25%)
- **30分钟内成功率**: 85% → 96% (+11%)
- **平均破解时间**: 减少40%
- **用户满意度**: 显著提升

### 测量方法
- 记录每个阶段的实际成功率
- 测量总体破解时间分布
- 收集用户反馈和使用模式
- 对比优化前后的性能数据